<div class="panel panel-default" ng-controller="userPreferencesCtrl" style="margin-top: 0;">
    <table st-table="displayedUserPreferences" st-safe-src="userPreferencesList" class="searchResults">
        <colgroup>
            <col style="width: 360px;">
            <col style="width: 160px;">
            <col style="width: 360px;">
            <col style="width: 160px;">
            <col style="width: 120px;">
        </colgroup>
        <thead>
        <tr>
            <th st-sort="role" st-sort-default="true">{{'userPreferences.user' | translate}}</th>
            <th st-sort="roleStatus">{{'userPreferences.option' | translate}}</th>
            <th st-sort="scope">{{'userPreferences.optionDesc' | translate}}</th>
            <th st-sort="scopeStatus">{{'userPreferences.value' | translate}}</th>
            <th class="text-center">
                <!--div ng-controller="manageUserContextsCtrl" ng-if="checkAccess('manageUserContexts')"-->
                <div ng-if="checkAccess('manageRoles')">
                    <button id="new_user_context" class="btn btn-primary btn-sm" ng-click='manageUserPreference("new", "")'>
                        <span class="fa fa-plus"></span>
                        <span>{{'userContexts.new' | translate}}</span>
                    </button>
                </div>
            </th>
        </tr>
        </thead>

        <tbody ng-if="!isPreferencesLoading && !emptyPreferenceResult">
            <tr ng-repeat="preference in displayedUserPreferences">
                <td ng-bind="userName"></td>
                <td ng-bind="preference.optionName"></td>
                <td ng-bind="preference.optionDescription"></td>
                <td ng-bind="preference.optionValue"></td>

                <td class="actionTd text-center">
                    <span ng-if="(uc.role!==null)&&checkAccess('manageRoles')">
                        <button id="user_context_edit" type="button" class="btn btn-sm btn-primary" ng-click='manageUserPreference("edit", uc)'>
                            <span><i class="fa fa-pencil"></i></span>
                        </button>
                    </span>

                    <span ng-if="checkAccess('manageRoles')&&(uc.role!==null)">
                        <button id="user_context_delete" type="button" class="btn btn-sm btn-danger" ng-click='manageUserPreference("delete", uc)'>
                            <span><i class="fa fa-remove"></i></span>
                        </button>
                    </span>
                </td>
            </tr>
        </tbody>

        <tbody ng-if="isPreferencesLoading">
            <tr>
                <td colspan="8">{{loadingMessage}}</td>
            </tr>
        </tbody>

        <tbody ng-if="emptyPreferenceResult">
            <tr>
                <td colspan="8">{{emptyResultMessage}}</td>
            </tr>
        </tbody>

    </table>
</div>
