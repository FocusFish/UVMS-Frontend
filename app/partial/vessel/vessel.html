<div ng-controller="VesselCtrl" ng-init="getInitialVessels()">
    <div class="addvessel fadeaddvesselin fadeaddvesselout" ng-show="addNewVesselVisible.active">
        <div class="row col-md-12">
            <p class="createResponseMessage">{{createResponseMessage}}</p>
        </div>
        <newVessel></newVessel>
    </div>
    <div class="getvessel fadegetvesselin fadegetvesselout" ng-show="getVesselVisible.active">
        <div class="row col-md-12">
            <p class="updateResponseMessage">{{updateResponseMessage}}</p>
        </div>
        <getVessel carrier="{{selectedCarrier}}"></getVessel>
    </div>
    <div class="vesselcontainerwrapper fadeaddvesselin fadeaddvesselout" ng-show="vesselSearchContainerVisible.active">
        <div class="vesselsearchboxcontainer">
            <div class="vesselsearchbox">
                <div class="vesselsearchtools">
                    <form class="vesselsearch">
                        <input type="text" class="form-control searchtext"
                               placeholder="{{'vessel.search_input_placeholder' | i18n}}" ng-model="wildCardSearch">
                    </form>
                    <!-- Dropdown -->
                    <div class="dropdown">
                        <button class="btn btn-default vesseldropdown dropdown-toggle" type="button" id="vesselDropdown"
                                data-toggle="dropdown" aria-expanded="true">
                            <div class="vesseldropdowntext">All</div>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="vesselDropdown">
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Vessels</a></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Another action</a></li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Something else here</a>
                            </li>
                            <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Separated link</a></li>
                        </ul>
                    </div>
                    <!-- Search button -->
                    <button type="button" class="btn btn-default btn-lg searchbutton" ng-click="searchVessels()">
                        <span class="fa fa-search" aria-hidden="true"></span>
                    </button>
                </div>
                <div class="vesselsearchgroups">
                    <savedSearchesButton></savedSearchesButton>
                </div>
                <!-- TODO: Remove "selected" -->
                {{selected}}
            </div>
            <div class="advancesearchcontainer row">
                <div class="advancesearchbody fadein fadeout" ng-show="advancesearch.active">
                    <advanced-search></advanced-search>
                </div>
                <div class="col-md-2">
                    <p class="advancesearchtag" ng-click="toggleanim()" ng-show="!advancesearch.active">
                        {{'vessel.search_advanced_expand' | i18n}}</p>
                    <p class="advancesearchtag" ng-click="toggleanim()" ng-show="advancesearch.active">
                        {{'vessel.search_advanced_minify' | i18n}}</p>
                </div>
            </div>
            <div class="vesselsearchboxfooter row">
                <!-- Dropdown -->
                <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle" type="button" id="vesselDropdownn"
                            data-toggle="dropdown" aria-expanded="true">
                        <div class="vesseldropdowntext">All</div>
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="vesselDropdown">
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Vessels</a></li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Another action</a></li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Something else here</a></li>
                    </ul>
                </div>
                <!-- add new button -->
                <button class="btn btn-sm pull-right addvesselbtn" ng-click="toggleAddNewVessel()" type="button">
                    {{'vessel.add_new' | i18n}} &nbsp;&nbsp;&nbsp;&nbsp;<span>+</span></button>
                <input type="text" class="filtertext pull-right" placeholder="Filter" ng-model="searchFilter">
            </div>
            <br>
        </div>
        <div class="vesselsearchresultcontainer">
            <div class="vesselsearchresult">
                <table class="col-md-12">
                    <thead>
                    <tr>
                        <th><input type="checkbox" ng-model="item.selectedAll" ng-click="checkAll()"/></th>
                        <th>
                            <a href="" ng-click="sortType='state'; sortReverse = !sortReverse">
                                {{'vessel.table_header_flag_state' | i18n}}
                                <span ng-show="sortType == 'state' && !sortReverse" class="fa fa-caret-down"></span>
                                <span ng-show="sortType == 'state' && sortReverse" class="fa fa-caret-up"></span>
                                <span ng-show="sortType != 'state'" class="fa fa-sort"></span>
                            </a>
                        </th>
                        <th>
                            <a href="" ng-click="sortType='externalMarking'; sortReverse = !sortReverse">
                                {{'vessel.table_header_external_marking' | i18n}}
                                <span ng-show="sortType == 'externalMarking' && !sortReverse"
                                      class="fa fa-caret-down"></span>
                                <span ng-show="sortType == 'externalMarking' && sortReverse"
                                      class="fa fa-caret-up"></span>
                                <span ng-show="sortType != 'externalMarking'" class="fa fa-sort"></span>
                            </a>
                        </th>
                        <th>
                            <a href="" ng-click="sortType='name'; sortReverse = !sortReverse">
                                {{'vessel.table_header_name' | i18n}}
                                <span ng-show="sortType == 'name' && !sortReverse" class="fa fa-caret-down"></span>
                                <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
                                <span ng-show="sortType != 'name'" class="fa fa-sort"></span>
                            </a>
                        </th>
                        <th>
                            <a href="" ng-click="sortType='ircs'; sortReverse = !sortReverse">
                                {{'vessel.table_header_signal' | i18n}}
                                <span ng-show="sortType == 'ircs' && !sortReverse" class="fa fa-caret-down"></span>
                                <span ng-show="sortType == 'ircs' && sortReverse" class="fa fa-caret-up"></span>
                                <span ng-show="sortType != 'ircs'" class="fa fa-sort"></span>
                            </a>
                        </th>
                        <th>
                            <a href="" ng-click="sortType='type'; sortReverse = !sortReverse">
                                {{'vessel.table_header_type' | i18n}}
                                <span ng-show="sortType == 'type' && !sortReverse" class="fa fa-caret-down"></span>
                                <span ng-show="sortType == 'type' && sortReverse" class="fa fa-caret-up"></span>
                                <span ng-show="sortType != 'type'" class="fa fa-sort"></span>
                            </a>
                        </th>
                        <th>
                            <a href="" ng-click="sortType='license'; sortReverse = !sortReverse">
                                {{'vessel.table_header_license' | i18n}}
                                <span ng-show="sortType == 'license' && !sortReverse" class="fa fa-caret-down"></span>
                                <span ng-show="sortType == 'license' && sortReverse" class="fa fa-caret-up"></span>
                                <span ng-show="sortType != 'license'" class="fa fa-sort"></span>
                            </a>
                        </th>
                        <th>
                            <a href="" ng-click="sortType='lastreport'; sortReverse = !sortReverse">
                                {{'vessel.table_header_last_report' | i18n}}
                                <span ng-show="sortType == 'lastreport' && !sortReverse"
                                      class="fa fa-caret-down"></span>
                                <span ng-show="sortType == 'lastreport' && sortReverse" class="fa fa-caret-up"></span>
                                <span ng-show="sortType != 'lastreport'" class="fa fa-sort"></span>
                            </a>
                        </th>
                        <th>{{'vessel.table_header_details' | i18n}}</th>
                        <th>{{'vessel.table_header_reports' | i18n}}</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="item in vessels | orderBy:sortType:sortReverse | filter:searchFilter">
                        <td><input type="checkbox" ng-model="item.Selected"/></td>
                        <td>{{item.countryCode}}</td>
                        <td>{{item.externalMarking}}</td>
                        <td>{{item.name}}</td>
                        <td>{{item.ircs}}</td>
                        <td>{{item.vesselType}}</td>
                        <td>{{item.license}}</td>
                        <td>{{item.lastReport}}</td>
                        <td>
                            <button class="btn vesselbtn button" ng-click="toggleGetVessel(item)">
                                {{'vessel.table_details_button' | i18n}}
                            </button>
                        </td>
                        <td>{{'vessel.table_report_button' | i18n}}</td>
                    </tr>
                    </tbody>
                </table>
                <p style="color: orangered">{{error}}</p>
            </div>
        </div>
    </div>
</div>
